<code class="javascript">
	var data = [{
	    "label": "AK",
	    "data": [12.5, 10.9, 9.1, 9.1, 12.6, 16.7, 15.1, 13.4, 12]
	}, {
	    "label": "ME",
	    "data": [-1, -0.7, 1.9, -0.4, -5.3, -5.2, -4.2, -5.5, -5.5]
	}, {
	    "label": "VT",
	    "data": [2.6, -1.1, -1.3, -4.5, -7.6, -6.8, -8.4, -13.4, -15.7]
	}, {
	    "label": "NH",
	    "data": [9.3, 10.8, 9.5, 6, 0.9, 0, -0.5, -1.6, -1]
	}, {
	    "label": "WA",
	    "data": [2.4, -0.4, -3.7, -4.4, -3.3, -2.6, -3.8, -5, -5.4]
	}, {
	    "label": "ID",
	    "data": [15, 15.7, 11.7, 11.3, 14.3, 18.3, 19.6, 17.4, 17.5]
	}, {
	    "label": "MT",
	    "data": [6.6, 5.2, 0.6, 0.4, 4.1, 10.2, 11.6, 7.1, 7]
	}, {
	    "label": "ND",
	    "data": [9.9, 11.1, 4.6, 7, 10, 11.8, 13.8, 10.4, 10.1]
	}, {
	    "label": "MN",
	    "data": [-6.6, -8.4, -8.4, -5.9, -4.5, -2.8, -2, -2.3, -1.8]
	}, {
	    "label": "MI",
	    "data": [1, -0.7, 0.2, -0.5, -1.9, -2.5, -2.7, -3.8, -3.8]
	}, {
	    "label": "NY",
	    "data": [-2.5, -4.5, -5.6, -6, -8.7, -12.1, -11.7, -10.2, -11.1]
	}, {
	    "label": "MA",
	    "data": [-6.1, -6.5, -7.8, -8.3, -11.3, -14.2, -14.3, -11.7, -9.7]
	}, {
	    "label": "RI",
	    "data": [-8, -9.4, -8.6, -9.1, -11.3, -14.8, -13.6, -11.2, -11.3]
	}, {
	    "label": "OR",
	    "data": [0.7, -1.4, -4.7, -4.7, -1.6, 0, -1.7, -4, -4.5]
	}, {
	    "label": "UT",
	    "data": [19.3, 19.3, 14.7, 15.3, 17, 19.4, 22, 20.2, 22.4]
	}, {
	    "label": "WY",
	    "data": [12.4, 13, 9.9, 7.4, 9.7, 16.7, 20.2, 19.7, 21.7]
	}, {
	    "label": "SD",
	    "data": [6.1, 7.2, 1.7, 2.5, 6.2, 9.3, 10.8, 8.8, 9.6]
	}, {
	    "label": "IA",
	    "data": [1.7, -1.8, -7.2, -4.7, -0.6, -0.4, -0.4, -1, -1.1]
	}, {
	    "label": "WI",
	    "data": [-1.3, -3.6, -5.1, -2.5, -0.3, -0.5, -0.6, -2.4, -2.5]
	}, {
	    "label": "IN",
	    "data": [4.7, 3.7, 4.6, 6.8, 7.6, 8.1, 8.7, 6.2, 5.2]
	}, {
	    "label": "OH",
	    "data": [0.7, 0.4, 0.9, 1.9, 1.7, 1.6, 1, 0.6, 0.9]
	}, {
	    "label": "PA",
	    "data": [-0.9, -3.5, -4.1, -2.4, -1.3, -1.2, -2.2, -2, -1.2]
	}, {
	    "label": "NJ",
	    "data": [2.1, 1.7, 2.2, 2.5, -1.6, -6.6, -6.3, -4.4, -5.6]
	}, {
	    "label": "CT",
	    "data": [2, 1, 0.3, -1, -3.1, -7.3, -7.8, -7.1, -7.2]
	}, {
	    "label": "CA",
	    "data": [3.1, 1.6, -1.5, -3.6, -3.8, -4.2, -6.1, -7.4, -9.3]
	}, {
	    "label": "NV",
	    "data": [9, 11.4, 7.5, 4.3, 2.9, 3.1, 1.1, -1.3, -2.1]
	}, {
	    "label": "CO",
	    "data": [7.8, 6.9, 2.6, 0.4, 3.1, 5.1, 2.9, 0.1, -0.8]
	}, {
	    "label": "NE",
	    "data": [14, 14, 9.2, 10.7, 15, 15.4, 15.5, 13.4, 12.2]
	}, {
	    "label": "MO",
	    "data": [-1.3, -0.4, -0.5, -2.5, -0.9, 1.6, 2.2, 3.1, 5.2]
	}, {
	    "label": "IL",
	    "data": [0.5, -1.8, -2.8, -4, -5, -5.4, -6.2, -7.7, -7.8]
	}, {
	    "label": "KY",
	    "data": [-3.6, -1.7, 1.6, 1.8, 2.9, 6.1, 8.4, 10.3, 12.7]
	}, {
	    "label": "WV",
	    "data": [-7.3, -5.8, -5.1, -5.3, -4, -0.1, 4.4, 7.8, 13]
	}, {
	    "label": "VA",
	    "data": [1.6, 2.5, 5, 6.2, 5.9, 5.1, 3.7, 1.7, 0.2]
	}, {
	    "label": "MD",
	    "data": [-4.5, -6.7, -4.4, -3.6, -4.4, -6.1, -8, -8.5, -10.3]
	}, {
	    "label": "DE",
	    "data": [-2.9, -1.6, 1.6, 0.3, -2.8, -5.2, -5.8, -7, -8.2]
	}, {
	    "label": "AZ",
	    "data": [11.3, 10.4, 7.4, 5.8, 4.1, 3.5, 3.8, 6, 7.3]
	}, {
	    "label": "NM",
	    "data": [3.5, 2.9, -0.1, -1.5, -0.5, 0.5, -0.3, -2.4, -3.7]
	}, {
	    "label": "KS",
	    "data": [6.5, 8, 5.3, 4.9, 10.9, 13, 11.4, 11.5, 12.2]
	}, {
	    "label": "AR",
	    "data": [-9.5, -1.5, 2.7, -1.6, -5.6, -0.8, 3.4, 8.8, 14]
	}, {
	    "label": "TN",
	    "data": [-5.3, -3.1, 1.7, 2.6, 2.2, 2.8, 4.1, 8.6, 11.8]
	}, {
	    "label": "NC",
	    "data": [-4.4, -0.7, 3.6, 4.1, 5.6, 7, 5.9, 4.3, 3.3]
	}, {
	    "label": "SC",
	    "data": [-5.1, 0.2, 6.6, 8.1, 8, 8.1, 7.9, 7.8, 7.8]
	}, {
	    "label": "DC",
	    "data": [-36.1, -42.7, -42.2, -38, -36.1, -37.8, -41, -40.7, -40.2]
	}, {
	    "label": "OK",
	    "data": [4.9, 9, 7.2, 6.8, 9.1, 10.2, 12.8, 16.8, 19]
	}, {
	    "label": "LA",
	    "data": [-2.2, -0.1, 1.8, 1, -0.5, 1.2, 5.1, 9.6, 11.9]
	}, {
	    "label": "MS",
	    "data": [-2.3, -0.7, 4.9, 7.5, 7.9, 8.2, 8.8, 9.5, 9]
	}, {
	    "label": "AL",
	    "data": [-5.1, -1.3, 4, 6.6, 7.9, 8.2, 9.8, 13.1, 13.9]
	}, {
	    "label": "GA",
	    "data": [-14.4, -6, 3.7, 4.7, 4.2, 5.8, 6.7, 6.7, 6.1]
	}, {
	    "label": "HI",
	    "data": [-3.3, -4.9, -6.1, -6, -6.4, -9.5, -7.6, -12.5, -19.5]
	}, {
	    "label": "TX",
	    "data": [0.7, 3.2, 3.5, 4.1, 6.5, 9.3, 10.7, 9.9, 9.8]
	}, {
	    "label": "FL",
	    "data": [1.1, 5, 6.8, 6, 3.1, 0.9, 0.8, 1.8, 1.9]
	}]

	var max = d3.max(data, function(data){
		if(data.label == "DC"){
			return 0;
		}
		return d3.max(data.data, function(d){
			return Math.abs(d)
		})
	})
	var yScale = d3.scaleLinear().domain( [-max,max] ).range([-20,20]);

	var config = {
		"el": "#g-container",
		"data": data,
		"break": 640
	};
	var map = new Fifty_graphs(config);

	map.graph = function(state_data, g, vars) {
		var width = vars.g_width
		console.log(vars,g.width)
		yScale.range( [ (-vars.g_width/3), (vars.g_width/3) ])

		var id = g.attr("id")

		g.append("rect")
			.attr("width", width)
			.attr("height", width)
			.attr("fill", "none")
			.attr("stroke-weight", "1px")
			.attr("stroke", "#ddd")

		g.append("text").attr("x", (width / 2)).attr("y", 20).style("text-anchor", "middle").style("vertical-align", "center").style("font-family", "sans-serif").style("color", "#333").text(id)


		var graph = g.append("g")

		graph.append("rect").attr("width", width).attr("height", 2).attr("y", width / 2).attr("x", 0).attr("fill", "#333")



		graph.selectAll("rect").data(state_data).enter()
			.append("rect")
			.attr("x", function(d, i) {
				return width / 9 * i;
			})
			.attr("width", width / 9)
			.attr("y", function(d, i) {
				if (d > 0) {
					return width / 2 - yScale(d);
				} else {
					return width / 2;
				}
			})
			.attr("height", function(d, i) {
				if(d > 0){
					return yScale(d);
				}else {
					return -yScale(d);
				}
			})
			.attr("fill", function(d, i) {
				if (d > 0) {
					return "#C81305";
				} else {
					return "#0485A8";
				}
			})
	}
	map.draw();
</code>
